<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Å–º–æ—Ç—Ä –ó–∞–º–µ—Ç–∫–∏</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            background-color: #000; /* –ß–µ—Ä–Ω—ã–π —Ñ–æ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
            color: #fff; /* –ë–µ–ª—ã–π —Ç–µ–∫—Å—Ç */
            font-family: Arial, sans-serif;
            text-align: center;
        }
        .vote-buttons {
            margin: 20px 0;
        }
    </style>
</head>

<body>
    <div id="note-content">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    <div class="vote-buttons">
        <button id="like-button">üëç –õ–∞–π–∫ <span id="like-count">0</span></button>
        <button id="dislike-button">üëé –î–∏–∑–ª–∞–π–∫ <span id="dislike-count">0</span></button>
    </div>
    <button onclick="goBack()">–ù–∞–∑–∞–¥</button>

    <script>
        function loadStyles() {
            const bgColor = localStorage.getItem('bgColor') || '#000'; // –ß–µ—Ä–Ω—ã–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            const textColor = localStorage.getItem('textColor') || '#fff'; // –ë–µ–ª—ã–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

            document.body.style.backgroundColor = bgColor;
            document.body.style.color = textColor;
        }

        const notes = JSON.parse(localStorage.getItem('notes')) || [];
        const noteId = localStorage.getItem('currentNoteId');
        const noteContentDiv = document.getElementById('note-content');

        const note = notes.find(n => n.id == noteId);
        if (note) {
            noteContentDiv.innerHTML = `<h1>${note.title}</h1><p>${note.content}</p>`;
            
            let likeCount = note.likeCount || 0;
            let dislikeCount = note.dislikeCount || 0;
            note.likedBy = note.likedBy || [];
            note.dislikedBy = note.dislikedBy || [];
            const userId = "userUniqueId"; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

            document.getElementById('like-count').textContent = likeCount;
            document.getElementById('dislike-count').textContent = dislikeCount;

            document.getElementById('like-button').onclick = function() {
                if (note.likedBy.includes(userId)) {
                    // –£–±–∏—Ä–∞–µ–º –ª–∞–π–∫
                    note.likedBy = note.likedBy.filter(id => id !== userId);
                    likeCount--;
                } else {
                    // –£–±–∏—Ä–∞–µ–º –¥–∏–∑–ª–∞–π–∫, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
                    if (note.dislikedBy.includes(userId)) {
                        note.dislikedBy = note.dislikedBy.filter(id => id !== userId);
                        dislikeCount--;
                    }
                    // –°—Ç–∞–≤–∏–º –ª–∞–π–∫
                    note.likedBy.push(userId);
                    likeCount++;
                }
                updateVoteCounts();
            };

            document.getElementById('dislike-button').onclick = function() {
                if (note.dislikedBy.includes(userId)) {
                    // –£–±–∏—Ä–∞–µ–º –¥–∏–∑–ª–∞–π–∫
                    note.dislikedBy = note.dislikedBy.filter(id => id !== userId);
                    dislikeCount--;
                } else {
                    // –£–±–∏—Ä–∞–µ–º –ª–∞–π–∫, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
                    if (note.likedBy.includes(userId)) {
                        note.likedBy = note.likedBy.filter(id => id !== userId);
                        likeCount--;
                    }
                    // –°—Ç–∞–≤–∏–º –¥–∏–∑–ª–∞–π–∫
                    note.dislikedBy.push(userId);
                    dislikeCount++;
                }
                updateVoteCounts();
            };

            function updateVoteCounts() {
                document.getElementById('like-count').textContent = likeCount;
                document.getElementById('dislike-count').textContent = dislikeCount;
                localStorage.setItem('notes', JSON.stringify(notes));
            }
        } else {
            noteContentDiv.innerHTML = '<p>–ó–∞–º–µ—Ç–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞.</p>';
        }

        function goBack() {
            window.history.back(); // –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
        }

        loadStyles(); // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∏–ª–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    </script>
</body>

</html>


